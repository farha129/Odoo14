<odoo>
    <data>

        <!-- Inherit Form View to Modify it Sale order-->
        <record id="view_order_form_inherited_delivery" model="ir.ui.view">
            <field name="name">view.order.form.inherited</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="delivery.view_order_form_with_carrier"/>
            <field name="arch" type="xml">

                <xpath expr="//button[@name='action_open_delivery_wizard']" position="replace">

                </xpath>

            </field>
        </record>

        <record id="view_quotation_inherit_tree" model="ir.ui.view">
            <field name="name">view.quotation_.inherit.tree</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_quotation_tree"/>
            <field name="arch" type="xml">

                <xpath expr="//field[@name='user_id']" position="after">
                    <field name="department_id"/>
                </xpath>

            </field>
        </record>

        <!-- Inherit Form View to Modify it Sale order-->
        <record id="view_order_form_inherited" model="ir.ui.view">
            <field name="name">view.order.form.inherited</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">

                <xpath expr="//header" position="inside">
                    <button name="action_gm_assistant_approve" class="oe_highlight" type="object" string="Approve"
                            states="gm_assistant"/>
                </xpath>

                <xpath expr="//field[@name='partner_id']" position="attributes">
                    <attribute name="context">{}</attribute>
                    <attribute name="options">{'no_create': True}</attribute>

                </xpath>

                <xpath expr="//button[@name='%(sale.action_view_sale_advance_payment_inv)d']" position="attributes">
                    <attribute name="attrs">{'invisible': [('state', 'not in', ['submit','approved'])]}
                    </attribute>
                </xpath>

                <xpath expr="//button[@name='action_confirm'][1]" position="attributes">
                    <attribute name="attrs">{'invisible': [('state','not in',['to_confirm'])]}</attribute>
                </xpath>
                <xpath expr="//button[@name='action_cancel']" position="attributes">
                    <attribute name="states">submit,gm_assistant,approved,wait_dis_approve,to_confirm</attribute>
                </xpath>

                <field name="sale_order_template_id" position="after">
                    <field name="type" attrs="{'readonly': [('state','!=','draft')]}"/>
                    <field name="invoice_type" invisible="0" attrs="{'readonly': [('invoice_type','!=','wholesale')]}"/>
                    <field name="taxes_id" widget="many2many_tags" options="{'no_create': True}"
                           context="{'search_view_ref': 'account.account_tax_view_search'}"
                           domain="[('type_tax_use','=','sale'),('company_id','=',company_id)]"/>
                    <field name="total_amount_in_words" invisible="1"/>
                    <field name="amount_in_words_arabic" invisible="1"/>

                </field>

                <xpath expr="//field[@name='order_line']/tree/field[@name='product_uom_qty']" position="after">
                    <field name="team_id" invisible="1"/>
                </xpath>

                <!--                <xpath expr="//field[@name='order_line']/tree/field[@name='warehouse_id']" position="after">-->
                <!--                    <field name="location_id"/>-->
                <!--                </xpath>-->

                <xpath expr="//field[@name='partner_id']" position="after">
                    <span class="o_form_label o_td_label" name="address_name">
                        <b attrs="{'invisible': [('partner_id', '=', False)]}">Delivery
                            Address
                        </b>

                    </span>
                    <div class="o_address_format">
                        <field name="street" placeholder="Street..." class="o_address_street"
                               attrs="{'readonly': [('state','!=','draft')]}"/>
                        <field name="street2" placeholder="Street 2..." class="o_address_street"
                               attrs="{'readonly': [('state','!=','draft')]}"/>
                        <field name="city" placeholder="City" class="o_address_city"
                               attrs="{'readonly': [('state','!=','draft')]}"/>
                        <field name="state_id" class="o_address_state" placeholder="State"
                               options="{'no_open': True, 'no_quick_create': True}"
                               context="{'country_id': country_id, 'default_country_id': country_id, 'zip': zip}"
                               attrs="{'readonly': [('state','!=','draft')]}"/>
                        <field name="zip" placeholder="ZIP" class="o_address_zip" invisible="1"/>
                        <field name="country_id" placeholder="Country" class="o_address_country"
                               options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"
                               attrs="{'readonly': [('state','!=','draft')]}" invisible="1"/>
                    </div>
                    <field name="department_id" required="1" attrs="{'readonly': [('state','!=','draft')]}"/>
                </xpath>

                <xpath expr="//group[@name='sale_info']" position="attributes">
                    <attribute name="attrs">{'invisible': [('state','=','draft')]}</attribute>
                </xpath>

                <xpath expr="//field[@name='client_order_ref']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

                <xpath expr="//field[@name='tag_ids']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

                <xpath expr="//field[@name='campaign_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

                <xpath expr="//field[@name='fiscal_position_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>


            </field>
        </record>

        <record id="view_inherit_sale_extension_form" model="ir.ui.view">
            <field name="name">view.inherit.sale.stock.extension.form</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale_stock_extension.sale_order_custom_form_inherit"/>
            <field name="arch" type="xml">

                <xpath expr="//notebook/page/field[@name='order_line']" position="before">
                    <button
                            string="Add shipping"
                            name="action_open_delivery_wizard"
                            type="object"
                            attrs="{'invisible': ['|', '|','|',('is_all_service', '=', True), ('order_line', '=', []), ('delivery_set', '=', True),('is_delivery', '=', False)]}"
                    />
                </xpath>


                <xpath expr="//field[@name='allow_warehouse_ids']" position="after">
                    <field name="location_source"/>
                    <field name="installation"/>
                    <field name="is_delivery"/>
                </xpath>

            </field>
        </record>

        <record id="view_inherit_sales_order_filter" model="ir.ui.view">
            <field name="name">view.sale.order.search</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_sales_order_filter"/>
            <field name="arch" type="xml">

                <xpath expr="//field[@name='analytic_account_id']" position="before">
                    <field name="department_id"/>
                </xpath>

                <xpath expr="//field[@name='analytic_account_id']" position="after">
                    <field name="street"/>
                    <field name="street2"/>
                    <field name="city"/>
                    <field name="state_id"/>
                    <field name="country_id"/>
                </xpath>

                <xpath expr="//filter[@name='order_month']" position="after">
                    <filter string="Street" name="street" domain="[]" context="{'group_by': 'street'}"/>
                    <filter string="Street2" name="street2" domain="[]" context="{'group_by': 'street2'}"/>
                    <filter string="City" name="city" domain="[]" context="{'group_by': 'city'}"/>
                    <filter string="State" name="state_id" domain="[]" context="{'group_by': 'state_id'}"/>
                    <filter string="Country" name="country_id" domain="[]" context="{'group_by': 'country_id'}"/>
                </xpath>

                <xpath expr="//filter[@name='salesperson']" position="before">
                    <filter string="Status" name="sales_states" context="{'group_by':'state'}"/>
                </xpath>

                <xpath expr="//filter[@name='salesperson']" position="after">
                    <filter string="Sales Team" name="sales_team" context="{'group_by':'team_id'}"/>
                    <filter string="Department" name="department_id" context="{'group_by':'department_id'}"/>
                </xpath>

            </field>
        </record>

        <record id="view_inherit_sale_invoice_policy_form" model="ir.ui.view">
            <field name="name">view.inherit.sale.invoice.policy.form</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="invoice_policy.view_order_form_inherit_sale_invoice_policy"/>
            <field name="arch" type="xml">

                <xpath expr="//field[@name='invoicing_policy']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

            </field>
        </record>

        <record id="sale.menu_sale_config" model="ir.ui.menu">
            <field name="groups_id"
                   eval="[(4, ref('sales_team.group_sale_manager')),(4, ref('sale_fadil.group_sale_showroom_manager'))]"/>
        </record>

        <record id="sale.sales_team_config" model="ir.ui.menu">
            <field name="groups_id"
                   eval="[(4, ref('sales_team.group_sale_manager')),(4, ref('sale_fadil.group_sale_showroom_manager'))]"/>
        </record>

        <record id="sale.menu_sale_report" model="ir.ui.menu">
            <field name="groups_id"
                   eval="[(4, ref('sales_team.group_sale_manager')),(4, ref('sale_fadil.group_sale_showroom_manager'))]"/>
        </record>

    </data>
</odoo>