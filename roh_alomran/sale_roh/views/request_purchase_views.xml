<?xml version="1.0" encoding="utf-8"?>
<odoo>

<!--        <record id="request_purchase_order_line_form" model="ir.ui.view">-->
<!--            <field name="name">request.purchase.line.form</field>-->
<!--            <field name="model">request.purchase.line</field>-->
<!--            <field name="arch" type="xml">-->
<!--                <form string="Purchase Order" class="o_purchase_order">-->
<!--                      <field name="product_id" readonly="1"/>-->
<!--                                    <field name="name" readonly="1"/>-->
<!--                                    <field name="product_qty" readonly="1"/>-->
<!--                                    <field name="product_uom" readonly="1"/>-->
<!--                                    <field name="state_line" readonly="1"/>-->
<!--                                    <field name="product_uom_category_id" invisible="1"/>-->
<!--                                    <field name="customer_id" />-->
<!--                </form>-->
<!--            </field>-->
<!--        </record>-->
     <record id="request_purchase_tree_line" model="ir.ui.view">
            <field name="name">request.purchase.line.tree</field>
            <field name="model">request.purchase.line</field>
            <field name="arch" type="xml">
                <tree>
                     <field name="product_id" readonly="1"/>
                                    <field name="customer_id" />
                                    <field name="product_qty" readonly="1"/>
                                    <field name="state_line" readonly="1"/>

                </tree>
            </field>
     </record>
     <record id="view_request_filter" model="ir.ui.view">
            <field name="name">request.purchase.select</field>
            <field name="model">request.purchase</field>
            <field name="arch" type="xml">
                <search string = 'Search Request'>
                    <field name="customer_id" string="Customer" filter_domain="[('customer_id', 'ilike', self)]"/>
                    <field name="sale_id" string="Sale Order" filter_domain="[('sale_id', 'ilike', self)]"/>
                    <filter string="Today" name="filter_today"
                            domain="[('date_order', '=', context_today().strftime('%Y-%m-%d'))]"/>

                    <group col="8" colspan="4" expand="0" string="Group By">
                                       <filter string="Date" name="date_order" context="{'group_by': 'date_order'}"/>
                                       <filter string="State" name="state" context="{'group_by': 'state'}"/>
                    </group>

                </search>
<!--                    <filter string="Sale Order" name="filter_start" domain="[('sale_id', '=', False)]"/>-->


<!--         <search string="Search Payslip Lines">-->
<!--                <field name="name" string="Payslip Lines" filter_domain="['|',('name','ilike',self),('code','ilike',self)]"/>-->
<!--                <field name="amount_select"/>-->
<!--                <field name="slip_id"/>-->
<!--                <group col="8" colspan="4" expand="0" string="Group By">-->
<!--                    <filter string="Salary Rule Category" name="category_id" context="{'group_by':'category_id'}"/>-->
<!--                    <filter string="Contribution Register" name="register_id" context="{'group_by':'register_id'}"/>-->
<!--                    <filter string="Amount Type" name="amount_select" context="{'group_by':'amount_select'}"/>-->
<!--                    <filter string="Employees" name="employee_id" context="{'group_by':'employee_id'}"/>-->
<!--                </group>-->
<!--            </search>-->

            </field>
        </record>



    <record id="request_purchase_order_form" model="ir.ui.view">
            <field name="name">request.purchase.form</field>
            <field name="model">request.purchase</field>
            <field name="arch" type="xml">
                <form string="Purchase Order" class="o_purchase_order">
                <header>
                    <button name="action_in_purchase" states="draft" string="In Purchase" type="object" />
<!--                    <button name="button_cancel"  string="Cancel" type="object" />-->
                    <button name="action_done" type="object" string="Done" states="in_purchase"/>
                     <field name="state" widget="statusbar" statusbar_visible="draft,in_purchase,done,cancel"/>


                </header>

                <sheet>
                 <div class="oe_button_box" name="button_box">

                    <button name="action_open_purchase_order" type="object" class="oe_stat_button" icon="fa-th-list">
                        <div class="o_field_widget o_stat_info">
                            <span class="o_stat_value">
                                <field name="po_count"/>
                            </span>
                            <span class="o_stat_text">Purchase</span>
                            <span class="o_stat_text">Orders</span>
                        </div>
                    </button>
                 </div>

                    <div class="oe_title">

                        <h1>

                            <field name="name" readonly="1"/>
                        </h1>
                    </div>
                    <group col = '4'>

                            <field name="customer_id" readonly="1"/>
                            <field name="date_order" readonly="1"/>
                            <field name="sale_id" readonly="1"/>
                            <field name="currency_id" groups="base.group_multi_currency" force_save="1" readonly="1"/>
                            <field name="state" invisible="1"/>

                        </group>
                    <notebook>
                        <page string="Lines" name="Lines">
                            <field name="line_ids"
                                widget="section_and_note_one2many">

                                <tree string="Purchase Order Lines" editable="bottom">

                                    <field name="product_id" readonly="1"/>
                                    <field name="name" readonly="1"/>
                                    <field name="product_uom" />
                                    <field name="product_qty" readonly="1"/>
                                    <field name="partner_id" />
                                    <field name="price_unit" />
                                    <field name="state_line" readonly="1"/>
                                    <field name="product_uom_category_id" invisible="1"/>
                                    <field name="customer_id" invisible="1"/>

                                </tree>
                            </field>

                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids"/>
                    <field name="activity_ids"/>
                    <field name="message_ids"/>
                </div>
                </form>
            </field>
        </record>
    <record id="request_purchase_tree" model="ir.ui.view">
            <field name="name">request.purchase.tree</field>
            <field name="model">request.purchase</field>
            <field name="arch" type="xml">
                <tree decoration-info="state=='draft'" decoration-danger="state == 'done'" decoration-success="state == 'in_purchase'" decoration-muted="state == 'cancel'" string="Request" >
                                        <field name="name" />
                                        <field name="date_order"/>
                                        <field name="customer_id"/>
                                        <field name="state"/>


                </tree>
            </field>
        </record>

     <record id="request_purchase" model="ir.actions.act_window">
            <field name="name">Requests From Sale</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">request.purchase</field>
            <field name="view_mode">tree,form</field>

       <field name="context">{"search_default_filter_today":1}</field>


            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                No request  found. Let's create one!
              </p>
            </field>
        </record>
        <menuitem action="request_purchase" id="menu_request_purchase"
            parent="purchase.menu_procurement_management"
            sequence="0"/>

            <record  id="purchase.menu_purchase_rfq" model="ir.ui.menu">
                            <field name="sequence">2</field>


            </record>





    





</odoo>
